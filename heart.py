from mirror_array.helpers import *
from mirror_array.coords import get_coords
from mirror_array.grid import build_mirror_array

heart_initial = [[599.4664306640625, 119.61083984375], [683.27, 190.94], [512.4031982421875, 192.084716796875], [1101.1800537109375, 620.8414306640625], [1133.19, 796.36], [66., 790.18], [105.59696960449219, 601.76708984375], [201.69, 473.63], [1006.43, 481.81], [1090.34, 965.27], [101.91, 954.78], [536.77880859375, 1007.7824401855469], [656.955078125, 1004.5348815917969], [724., 1055.37], [482.96, 1051.51], [407.31, 1082.43], [791.62, 1080.77], [969.3441162109375, 1067.0575714111328], [218.079345703125, 1061.4600219726562], [154.13, 1019.47], [1030.3, 1030.55], [1124.528564453125, 704.10302734375], [76.73, 689.26], [416.39, 281.09], [770.11, 268.22], [336.1, 349.31], [862.73, 349.14], [936.64, 413.03], [267.752685546875, 407.59344482421875], [146.53, 537.92], [1061.13, 546.2], [1127.97, 874.39], [71.11, 869.47], [307.07, 1087.15], [880.68, 1088.85], [600.4229736328125, 931.498046875], [599.6448974609375, 112.80242919921875]]
heart_coords = get_coords(heart_initial) # 42.02in x 38.43in

mirror_positions, mirror_normals, target_positions = build_mirror_array(heart_coords, use_ground_target=True, filename="mirror_array_heart.stl")


plot_colored_projection(target_positions)