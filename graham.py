
from mirror_array.helpers import *
from mirror_array.coords import get_coords
from mirror_array.grid import build_mirror_array, divide_hex_grid_flower

# Some cursive one 168
# graham_initial = [[61.88,12.08],[61.88,12.08],[57.66,7.4],[51.51,6.15],[45.15,6.5],[38.93,8.03],[32.84,9.89],[27.22,12.96],[21.88,16.46],[16.78,20.33],[12.66,25.18],[9.05,30.46],[6.26,36.17],[5.09,42.41],[6.39,48.6],[10.42,53.47],[15.98,56.65],[22.33,57.41],[28.56,56.46],[34.73,54.75],[40.2,51.47],[45.47,47.84],[50.56,43.95],[55.37,39.74],[59.96,35.35],[62.95,32.45],[59.11,37.21],[56.67,43.08],[54.86,49.23],[53.05,55.37],[51.24,61.51],[48.25,67.13],[44.87,72.57],[41.3,77.88],[37.49,83.03],[33.07,87.46],[27.4,90.44],[21.02,90.92],[17.03,86.77],[17.98,80.58],[21.2,75.13],[25.66,70.54],[30.67,66.6],[36.03,63.09],[41.62,59.98],[47.4,57.27],[53.48,55.25],[59.72,53.85],[63.53,53.14],[70.96,46.27],[72.32,44.13],[75.76,38.73],[79.35,33.42],[82.94,28.12],[82.42,26.93],[77.11,30.51],[80.81,33.35],[87.21,33.44],[92.08,34.26],[88.04,39.23],[84.05,44.23],[80.92,49.82],[80.13,55.78],[84.42,58.08],[89.85,55.44],[94.51,51.05],[98.6,46.27],[140.13,46.27],[140.06,46.36],[136.07,51.36],[131.24,55.49],[125.5,58.13],[121.26,55.02],[122.32,48.71],[124.22,42.59],[123.5,42.04],[118.9,46.5],[114.16,50.81],[109.23,54.89],[103.54,57.74],[98.67,55.46],[98.69,49.23],[102.4,44.17],[106.86,39.65],[112.3,36.28],[118.21,33.92],[124.52,33.3],[127.3,34.28],[142.09,46.27],[144.45,44.12],[149.18,39.8],[154,35.59],[159.18,31.83],[164.36,28.07],[169.55,24.31],[173.81,19.55],[177.94,14.66],[179.38,8.43],[174.44,6.24],[169.35,9.87],[164.96,14.52],[161.39,19.8],[158.17,25.34],[155.14,30.98],[152.13,36.63],[150.15,42.72],[148.2,48.82],[146.26,54.92],[147.68,54.91],[151.78,50],[155.78,44.99],[160.06,40.3],[165.39,36.76],[170.69,36.59],[168.61,42.52],[165.69,48.15],[164.03,54.34],[167.57,58.58],[173.38,56.7],[178.25,52.57],[182.67,47.94],[184.12,46.28],[225.65,46.27],[223.15,49.64],[218.72,54.25],[213.3,57.65],[207.85,57.01],[207.4,50.98],[209.06,44.81],[210.31,40.13],[206.09,44.89],[201.48,49.33],[196.54,53.41],[191.2,56.83],[185.77,57.16],[184.05,51.54],[186.42,45.93],[190.58,41.06],[195.86,37.5],[201.52,34.6],[207.73,33.3],[212.82,34.28],[227.61,46.27],[228.26,45.68],[232.99,41.36],[235.54,36.21],[233.28,42.2],[231.02,48.19],[228.77,54.19],[229.09,56.09],[233.48,51.43],[237.69,46.61],[241.91,41.78],[246.66,37.51],[252.22,34.55],[251.79,40.18],[248.81,45.84],[245.82,51.51],[250.17,48.3],[255.18,44.32],[260.25,40.41],[266.27,38.22],[263.48,42.82],[261.38,48.87],[260.45,54.99],[264.92,58.44],[270.53,55.66],[275.02,51.21],[279.1,46.27]]
# Readability 127
graham_initial = [[25.95,36.38],[25.95,36.38],[34.04,36.38],[39,39.5],[39,47.59],[37.5,54.9],[30.11,58.06],[22.12,58.09],[15,54.58],[10.03,48.26],[7.17,40.78],[6.8,32.73],[8.2,24.81],[11.93,17.73],[17.99,12.56],[25.72,10.44],[33.56,11.97],[38.77,15.6],[58.47,58.58],[58.47,56.87],[58.47,48.78],[58.47,40.69],[58.47,32.6],[58.47,24.51],[58.47,16.42],[61.47,11.33],[69.56,11.33],[77.49,12.33],[83.81,16.91],[85.23,24.52],[82,31.7],[74.72,34.91],[66.69,35.4],[58.8,35.4],[66.89,35.4],[73.62,37.79],[77.74,44.75],[81.86,51.72],[85.92,58.58],[97.38,58.81],[97.41,58.71],[100.19,51.11],[102.96,43.51],[105.74,35.92],[108.51,28.32],[111.29,20.72],[114.06,13.12],[116.74,15.22],[119.35,22.87],[121.97,30.53],[124.58,38.18],[120.26,40.87],[112.17,40.87],[104.32,40.87],[112.41,40.87],[120.5,40.87],[126.54,43.79],[129.24,51.41],[131.88,58.81],[147.3,58.34],[147.3,58.11],[147.3,50.02],[147.3,41.93],[147.3,33.84],[147.3,25.75],[147.3,17.66],[147.3,12.63],[147.3,20.72],[147.3,28.81],[151.12,33.08],[159.21,33.08],[167.3,33.08],[175.39,33.08],[177.3,26.89],[177.3,18.8],[177.3,11.94],[177.3,20.03],[177.3,28.12],[177.3,36.21],[177.3,44.3],[177.3,52.39],[177.3,58.34],[192.57,58.81],[193.31,56.81],[196.08,49.21],[198.86,41.61],[201.63,34.02],[204.41,26.42],[207.18,18.82],[209.96,11.22],[212.59,17.13],[215.21,24.79],[217.82,32.44],[220.43,40.1],[213.43,40.87],[205.34,40.87],[201.55,40.87],[209.64,40.87],[217.73,40.87],[222.41,45.7],[225.12,53.32],[227.07,58.81],[242.28,58.81],[242.28,56.56],[242.28,48.47],[242.28,40.38],[242.28,32.29],[242.28,24.2],[242.28,16.11],[244.83,11.3],[247.61,18.9],[250.39,26.5],[253.17,34.09],[255.95,41.69],[258.73,49.29],[261.53,48.48],[264.33,40.89],[267.14,33.31],[269.94,25.72],[272.75,18.13],[275.94,11.1],[277,18.13],[277,26.22],[277,34.31],[277,42.4],[277,50.49],[277,58.58]]
graham_coords = get_coords(graham_initial, mirror_x=True, mirror_y=True) # 42.02in x 38.43in

mirror_positions, mirror_normals, target_positions = build_mirror_array(graham_coords, use_ground_target=True, filename="mirror_array_graham.stl", divider_function=divide_hex_grid_flower)


plot_colored_projection(target_positions)
plot_colored_grid(mirror_positions, divide_hex_grid_flower(mirror_positions, 14.85))